// swap-macro-set.min.js, for SugarCube 2, by Chapel
;!function(){"use strict";var o={tryGlobal:!0,resetButton:!0,normal:"violet",selected:"red",cls:"swappable"};setup.swap=setup.swap||{};var l=null;function i(t){function a(){return t}setup.swap.current=a,o.tryGlobal&&(window.swapCurrent=a)}function r(t,a){var e=$(document.createElement("span"));return $(document.createElement("a")).wiki(t).css("color",o.normal).attr({"data-swap-flag":"false","data-orig-content":t,"data-wiki-code":a||""}).addClass(o.cls).appendTo(e).ariaClick(function(t){t.preventDefault();var a=$(this);if("true"===a.attr("data-swap-flag"))a.attr("data-swap-flag","false").css("color",o.normal),l=null;else if(l){var e=l.text(),s=a.text(),r=l.attr("data-wiki-code"),n=a.attr("data-wiki-code");l.attr("data-swap-flag","false").css("color",o.normal).empty().wiki(s),a.attr("data-swap-flag","false").css("color",o.normal).empty().wiki(e),r&&"string"==typeof r&&r.trim()&&(i(s),$.wiki(r)),n&&"string"==typeof n&&n.trim()&&(i(e),$.wiki(n)),setup.swap.current&&"function"==typeof setup.swap.current&&delete setup.swap.current,o.tryGlobal&&window.swapCurrent&&"function"==typeof window.swapCurrent&&delete window.swapCurrent,l=null}else(l=a).attr("data-swap-flag","true").css("color",o.selected)}),e}function a(){l=null,$("a."+o.cls).each(function(){var t=$(this);t.empty().wiki(t.attr("data-orig-content")).attr("data-swap-flag","false").css("color",o.normal)})}Macro.add("swap",{tags:["onswap"],skipArgs:!0,handler:function(){var t=this.payload[0].contents,a=this.payload[1]?this.payload[1].contents:"",e=this.output,s=this.name;r(t,a).addClass("macro-"+s).appendTo(e)}}),Macro.add("resetswap",{handler:function(){var t=this.args&&this.args[0]&&"string"==typeof this.args[0]?this.args[0]:"Reset";$(document.createElement(o.resetButton?"button":"a")).wiki(t).ariaClick({label:"Reset all swappable elements."},function(t){t.preventDefault(),a()}).appendTo(this.output)}}),setup.swap.create=r,setup.swap.reset=a}();
// end swap-macro-set.min.js