// dialog-api-macro-set.min.js, for SugarCube 2, by Chapel
// v1.3.0, 2024-07-22, 336675ff2cabe5f729a5f30d86aa409cc8432726
;Macro.add("dialog",{tags:["onopen","onclose"],handler:function(){var t="",s=null,o=null,n=this.args.length>0?this.args[0]:"",i=this.args.length>1?this.args.slice(1).flat(1/0):[];this.payload.forEach((function(n,i){0===i?t=n.contents:"onopen"===n.name?s=s?s+n.contents:n.contents:o=o?o+n.contents:n.contents})),i.push("macro-"+this.name),Dialog.setup(n,i.join(" ")),Dialog.wiki(t),s&&"string"==typeof s&&s.trim()&&$(document).one(":dialogopened",(function(){$.wiki(s)})),o&&"string"==typeof o&&o.trim()&&$(document).one(":dialogclosed",(function(){$.wiki(o)})),Dialog.open()}}),Macro.add("popup",{handler:function(){if(this.args.length<1)return this.error("need at least one argument; the passage to display");if(!Story.has(this.args[0]))return this.error("the passage "+this.args[0]+"does not exist");var t=this.args[0],s=this.args.length>1?this.args[1]:"",o=this.args.length>2?this.args.slice(2).flat(1/0):[];o.push("macro-"+this.name),Dialog.setup(s,o.join(" ")),Dialog.wiki(Story.get(t).processText()),Dialog.open()}}),Macro.add("dialogclose",{skipArgs:!0,handler:function(){Dialog.close()}});
// end dialog-api-macro-set.min.js