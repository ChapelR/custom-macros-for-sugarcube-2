// speech.min.js, for SugarCube 2, by Chapel
// v1.0.1, 2021-01-22, 404cc7678295ca61a8b0b8bc3fa5d54dba6ac858
;!function(){"use strict";var t=new Map;function a(a,e){if(State.length)throw new Error("addCharacter() -> must be called before story starts");a&&e?(t.has(a)&&console.error('addCharacter() -> overwriting character "'+a+'"'),t.set(a,e)):console.error("addCharacter() -> invalid arguments")}function e(a,e,r,s){var n=$(document.createElement("div")).addClass(Util.slugify(e)+" say"),c=$(document.createElement("img")).attr("src",s||t.get(e)||"");return c.attr("src")&&c.attr("src").trim()&&n.append(c),n.append($(document.createElement("p")).wiki(e.toUpperFirst())).append($(document.createElement("p")).wiki(r)),a&&(a instanceof $||(a=$(a)),n.appendTo(a)),n}setup.say=e,setup.addCharacter=a,Macro.add("character",{handler:function(){a(this.args[0],this.args[1])}}),$(document).one(":passagestart",(function(){var a=Array.from(t.keys());a.push("say"),Macro.add(a,{tags:null,handler:function(){"say"!==this.name?e(this.output,this.name,this.payload[0].contents):e(this.output,this.args[0],this.payload[0].contents,this.args[1])}})}))}();
// end speech.min.js