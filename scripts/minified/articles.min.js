// articles.min.js, for SugarCube 2, by Chapel
;!function(){"use strict";var t=new Map,i=["eunuch","eucalyptus","eugenics","eulogy","euphemism","euphony","euphoria","eureka","european","euphemistic","euphonic","euphoric","euphemistically","euphonically","euphorically","heir","heiress","herb","homage","honesty","honor","honour","hour","honest","honorous","honestly","hourly","one","ouija","once","ubiquitous","ugandan","ukrainian","unanimous","unicameral","unified","unique","unisex","universal","urinal","urological","useful","useless","usurious","usurped","utilitarian","utopic","ubiquitously","unanimously","unicamerally","uniquely","universally","urologically","usefully","uselessly","usuriously"],a=["a","an"],n=/[aeiou8]/i,u=/[A-Z]+$/,o=/[UFHLMNRSX]/,s=/[.,\/#!$%\^&\*;:{}=\-_`~()]/g;function l(e){return"a"===e?"an":"a"}function r(e,r,i){var n;return 0<State.length?(n="cannot add article override -> needs to be run in StoryInit special passage or earlier",console.error(n),n):r&&"string"==typeof r?(e&&"string"==typeof e&&(e=e.toLowerCase().trim()),a.includes(e)?(r=r.trim(),void(i?t.add(r,{article:e,caseSensitive:!!i}):t.add(r.toLowerCase(),{article:e,caseSensitive:!!i}))):(n='cannot add article override -> invalid article, must be "a" or "an"',console.error(n),n)):(n="cannot add article override -> invalid word",console.error(n),n)}function c(e){var r;return r=n.test(e.first())?"an":"a",function(e,r){return!!i.includes(e.toLowerCase())&&l(r)}(e,r)||function(e,r){return!(!u.test(e)||!o.test(e.first()))&&l(r)}(e,r)||r}function h(e){if(e&&"string"==typeof e){var r=e.trim().split(" ")[0].trim();return function(e){var r=(e=e.trim()).toLowerCase();if(t.has(r)||t.has(e)){var i=t.get(r)||t.get(e);return i.caseSensitive&&!t.has(e)?null:i.article}return null}(r=r.replace(s,""))||c(r)}}function d(e,r){if(!e||"string"!=typeof e)return e;var i=h(e);return(r?i.toUpperFirst():i)+" "+e}setup.articles={find:h,output:d,override:r},Macro.add("setarticle",{handler:function(){var e=r(this.args[0],this.args[1],this.args[2]);e&&"string"==typeof e&&this.error(e)}}),Macro.add(["a","an","A","An"],{handler:function(){var e=this.name.first()===this.name.first().toUpperCase();this.output.append(d(String(this.args[0]),e))}})}();
// end articles.min.js