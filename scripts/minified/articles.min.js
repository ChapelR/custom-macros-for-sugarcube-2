// articles.min.js, for SugarCube 2, by Chapel
;!function(){"use strict";var n=new Map,u=["eunuch","eucalyptus","eugenics","eulogy","euphemism","euphony","euphoria","eureka","european","euphemistic","euphonic","euphoric","euphemistically","euphonically","euphorically","heir","heiress","herb","homage","honesty","honor","honour","hour","honest","honorous","honestly","hourly","one","ouija","once","ubiquitous","ugandan","ukrainian","unanimous","unicameral","unified","unique","unisex","universal","urinal","urological","useful","useless","usurious","usurped","utilitarian","utopic","ubiquitously","unanimously","unicamerally","uniquely","universally","urologically","usefully","uselessly","usuriously"],a=["a","an"],o=/[aeiou8]/i,s=/[A-Z]+$/,l=/[UFHLMNRSX]/,i=/[.,\/#!$%\^&\*;:{}=\-_`~()]/g;function c(e){return"a"===e?"an":"a"}function r(e,r,i){var t;return 0<State.length?(t="cannot add article override -> needs to be run in StoryInit special passage or earlier",console.error(t),t):r&&"string"==typeof r?(e&&"string"==typeof e&&(e=e.toLowerCase().trim()),a.includes(e)?(r=r.trim(),void(i?n.add(r,{article:e,caseSensitive:!!i}):n.add(r.toLowerCase(),{article:e,caseSensitive:!!i}))):(t='cannot add article override -> invalid article, must be "a" or "an"',console.error(t),t)):(t="cannot add article override -> invalid word",console.error(t),t)}function t(e){var r,i,t,n,a;return r=o.test(e.first())?"an":"a",n=e,a=r,!!u.includes(n)&&c(a)||(i=e,t=r,!(!s.test(i)||!l.test(i.first()))&&c(t))||r}function h(e){if(e&&"string"==typeof e){var r=e.trim().split()[0].trim();return r=r.replace(i,""),function(e){var r=(e=e.trim()).toLowerCase();if(n.has(r)||n.has(e)){var i=n.get(r)||n.get(e);return i.caseSensitive&&!n.has(e)?null:i.article}return null}(firstWord)||t(firstWord)}}function d(e,r){if(!e||"string"!=typeof e)return e;var i=h(e);return(r?i.toUpperFirst():i)+" "+e}setup.aritcles={find:h,output:d,override:r},Macro.add("setarticle",{handler:function(){var e=r(this.args[0],this.args[1],this.args[2]);e&&"string"==typeof e&&this.error(e)}}),Macro.add(["a","an","A","An"],{handler:function(){var e=this.name.first()===this.name.first().toUpperCase();this.output.append(d(String(this.args[0]),e))}})}();
// end articles.min.js