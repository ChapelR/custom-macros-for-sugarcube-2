// articles.min.js, for SugarCube 2, by Chapel
;!function(){"use strict";var a=new Map,u=["eunuch","eucalyptus","eugenics","eulogy","euphemism","euphony","euphoria","eureka","european","euphemistic","euphonic","euphoric","euphemistically","euphonically","euphorically","heir","heiress","herb","homage","honesty","honor","honour","hour","honest","honorous","honestly","hourly","one","ouija","once","ubiquitous","ugandan","ukrainian","unanimous","unicameral","unified","unique","unisex","universal","urinal","urological","useful","useless","usurious","usurped","utilitarian","utopic","ubiquitously","unanimously","unicamerally","uniquely","universally","urologically","usefully","uselessly","usuriously"],t=["a","an"],s=/[aeiou8]/i,o=/[A-Z]+$/,l=/[UFHLMNRSX]/,c=/[.,\/#!$%\^&\*;:{}=\-_`~()]/g;function h(e){return"a"===e?"an":"a"}function r(e,r,i){var n;return 0<State.length?(n="cannot add article override -> needs to be run in StoryInit special passage or earlier",console.error(n),n):r&&"string"==typeof r?(e&&"string"==typeof e&&(e=e.toLowerCase().trim()),t.includes(e)?(r=r.trim(),void(i?a.add(r,{article:e,caseSensitive:!!i}):a.add(r.toLowerCase(),{article:e,caseSensitive:!!i}))):(n='cannot add article override -> invalid article, must be "a" or "an"',console.error(n),n)):(n="cannot add article override -> invalid word",console.error(n),n)}function d(e){var r,i,n,a,t;return r=s.test(e.first())?"an":"a",a=e,t=r,!!u.includes(a)&&h(t)||(i=e,n=r,!(!o.test(i)||!l.test(i.first()))&&h(n))||r}function i(e,r){if(!e||"string"!=typeof e)return e;var i=e.trim().split()[0].trim(),n=function(e){var r=(e=e.trim()).toLowerCase();if(a.has(r)||a.has(e)){var i=a.get(r)||a.get(e);return i.caseSensitive&&!a.has(e)?null:i.article}return null}(i=i.replace(c,""))||d(i);return(r?n.toUpperFirst():n)+" "+e}setup.aritcles={run:i,override:r},Macro.add("setarticle",{handler:function(){var e=r(this.args[0],this.args[1],this.args[2]);e&&"string"==typeof e&&this.error(e)}}),Macro.add(["a","an","A","An"],{handler:function(){var e=this.name.first()===this.name.first().toUpperCase();this.output.append(i(String(this.args[0]),e))}})}();
// end articles.min.js