// continue.min.js, for SugarCube 2, by Chapel
;!function(){"use strict";var t=["a",":button",'*[role="button"]',".continue-macro-ignore","#ui-bar","#ui-dialog"],i=0;function o(){$(document).on("click.continue-macro keyup.continue-macro",t.join(", "),function(n){n.stopPropagation()})}function n(){if(0<State.length)return!1;var n=[].slice.call(arguments).flatten();return t=t.concat(n),!0}function c(n,t){var o,e=(o="."+Date.now().toString(36)+"-"+i,i++,o);if(t&&"function"==typeof t){var c="click.continue-macro"+e;n&&(c=c+" keyup.continue-macro"+e),$(document).one(c,function(){t.call(),$(document).off(e)})}}prehistory["%%continue-expiration"]=function(){i=0},$(document).one(":passagerender",function(){o()}),Macro.add("ignore",{handler:function(){if(!n(this.args))return this.error("the <<ignore>> macro should only be run from StoryInit or equivalent.")}}),Macro.add("cont",{tags:null,handler:function(){var n,t=this.args.includes("append"),o=this.args.includesAny("key","keypress","press","button"),e=this.payload[0].contents;t&&(n=$(document.createElement("span")).addClass("macro-"+this.name).appendTo(this.output)),c(o,this.createShadowWrapper(function(){t&&n&&n instanceof $?n.wiki(e):$.wiki(e)}))}}),setup.cont=c,setup.cont.ignore=n,setup.cont.reset=function(){var n=[].slice.call(arguments).flatten();t=t.concat(n),$(document).off(".continue-macro"),o()},window.cont=window.cont||setup.cont}();
// end continue.min.js